!function(t){var e={};function i(n){if(e[n])return e[n].exports;var l=e[n]={i:n,l:!1,exports:{}};return t[n].call(l.exports,l,l.exports,i),l.l=!0,l.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var l in t)i.d(n,l,function(e){return t[e]}.bind(null,l));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=2)}([function(t,e){const i=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","-","_"];function n(t,e){return e<=t.length?t:(Array(e).join("0")+t).slice(-e)}function l(t,e){return e<=t.length?t:(t+Array(e).join("0")).slice(-e)}e.dict=i,e.ser=t=>{if(!t.width||255<t.width||!t.height||255<t.height)throw new Error("フィールドのサイズが異常です。");if(t.cell_size<=0||63<t.cell_size)throw new Error("セルのサイズが異常です。");var e=n(t.width.toString(2),8)+n(t.height.toString(2),8)+n(t.cell_size.toString(2),6);for(let i=0;i<t.width;i++)for(let n=0;n<t.height;n++){if(!t.field[i]||"boolean"!=typeof t.field[i][n])throw new Error("フィールドが異常です。");e+=Number(t.field[i][n]).toString(2)}return function(t){var e=[];for(let i=0;i<t.length;i+=6)e.push(l(t.slice(i,i+6),6));return e}(e).map(t=>i[parseInt(t,2)]).join("")},e.de=t=>{const e=t.split("").map(t=>i.indexOf(t)).map(t=>n(t.toString(2),6)).join(""),l={width:parseInt(e.slice(0,8),2),height:parseInt(e.slice(8,16),2),cell_size:parseInt(e.slice(16,22),2),field:[]};var s=22;for(let t=0;t<l.width;t++){l.field[t]=[];for(let i=0;i<l.height;i++,s++){if(e.length<=s)throw new Error("フィールドのサイズが異常です。");l.field[t][i]="1"==e.charAt(s)}}return l}},function(t,e){e.encode=(t,e)=>{var i="";for(let l=0;l<t.length;l++){let s=n(t,l)%e.length;i+=e[s]+t.charAt(l),l+=s}return i;function n(t,e){var i=0;const n=t.charAt(e);for(let l=e+1;l<t.length&&t.charAt(l)==n;l++)i++;return i}},e.decode=(t,e)=>{var i="";for(let n=0;n<t.length;n+=2)i+=t.charAt(n+1).repeat(e.indexOf(t.charAt(n))+1);return i}},function(t,e,i){window.onload=()=>{const t=document.getElementById("container"),e=document.getElementById("share"),n=document.createElement("canvas");return t.appendChild(n),i(3).share(e),i(4).start(n,function(t){try{return window.location.search.replace(/^\?/,"").split("&").map(t=>t.split("=")).find(e=>e[0]==t)[1]}catch(t){return}}("data"))}},function(t,e){e.share=t=>{const e=document.createElement("a");e.innerHTML="Tweet #SYOGOL",e.href="https://twitter.com/intent/tweet?button_hashtag=SYOGOL&ref_src=twsrc%5Etfw",e.classList.add("twitter-hashtag-button"),e.dataset.text="ライフゲームのパターンを作りました。",e.dataset.url=window.location,e.dataset.lang="ja",e.dataset.showCount="false";const i=document.createElement("script");i.async=!0,i.src="https://platform.twitter.com/widgets.js",i.charset="utf-8",t.appendChild(e),t.appendChild(i)}},function(t,e,i){const n=i(0).ser,l=i(0).de,s=i(0).dict,r=i(1).encode,h=i(1).decode,c=50,o=50,a=15,d=100,f=2,u=3,p=3,g=3;class w{constructor(t,e=c,i=o,n=a,l=null,s=d){this.width=e,this.height=i,this.cell_size=n,this.field=[],this.canvas=t,this.canvas.width=this.width*this.cell_size,this.canvas.height=this.height*this.cell_size,this.canvas.style.border="solid 1px black",this.ctx=this.canvas.getContext("2d"),this.reset(),this.canvas.addEventListener("click",t=>{if(null!=this.interval_id)return;let e=t.target.getBoundingClientRect(),i=Math.floor((t.clientX-e.left)/this.cell_size),n=Math.floor((t.clientY-e.top)/this.cell_size);this.get(i,n)?this.unfill(i,n):this.fill(i,n),this.flip(i,n)}),l&&(this.field=l,this.draw()),this.interval=s,this.interval_id=null}step(){let t=[];for(let i=0;i<this.width;i++){t[i]=[];for(let n=0;n<this.height;n++)t[i][n]=e(this.field,i,n)}function e(t,e,i){let n=function(t,e,i){let n=0;for(let l=-1;l<=1;l++)for(let s=-1;s<=1;s++)(0!=l||0!=s)&&t[e+l]&&t[e+l][i+s]&&n++;return n}(t,e,i);return t[e][i]?f<=n&&n<=u:p<=n&&n<=g}this.field=t}get(t,e){return this.field[t][e]}set(t,e,i){this.field[t][e]=i}flip(t,e){this.field[t][e]=!this.field[t][e]}start(){null==this.interval_id&&(this.interval_id=window.setInterval(()=>{this.step(),this.refresh(),this.draw()},this.interval))}stop(){null!=this.interval_id&&(window.clearInterval(this.interval_id),this.interval_id=null)}reset(){this.stop(),this.refresh();for(let t=0;t<this.width;t++){this.field[t]=[];for(let e=0;e<this.height;e++)this.field[t][e]=!1}}refresh(){this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.strokeStyle="gray",this.ctx.lineWidth=1;for(let t=1;t<this.width;t++)this.ctx.beginPath(),this.ctx.moveTo(t*this.cell_size+.5,0),this.ctx.lineTo(t*this.cell_size+.5,this.canvas.height),this.ctx.stroke();for(let t=1;t<this.height;t++)this.ctx.beginPath(),this.ctx.moveTo(0,t*this.cell_size+.5),this.ctx.lineTo(this.canvas.height,t*this.cell_size+.5),this.ctx.stroke()}draw(){for(let t=0;t<this.width;t++)for(let e=0;e<this.height;e++)this.get(t,e)&&this.fill(t,e)}fill(t,e){this.ctx.beginPath(),this.ctx.fillStyle="black",this.ctx.fillRect(t*this.cell_size+.5,e*this.cell_size+.5,this.cell_size-.5,this.cell_size-.5)}unfill(t,e){this.ctx.beginPath(),this.ctx.fillStyle="white",this.ctx.fillRect(t*this.cell_size+.5,e*this.cell_size+.5,this.cell_size-.5,this.cell_size-.5)}}e.start=(t,e)=>{var i;if(e){const n=l(h(e,s));i=new w(t,n.width,n.height,n.cell_size,n.field)}else i=new w(t);!function(t){const e=document.getElementById("container"),i=document.createElement("div");i.style.display="block",e.appendChild(i);const l=document.createElement("button");l.innerHTML="スタート";const h=document.createElement("button");h.innerHTML="ストップ";const c=document.createElement("button");c.innerHTML="リセット";const o=document.createElement("button");o.innerHTML="セーブ",i.appendChild(l),i.appendChild(h),i.appendChild(c),i.appendChild(o),l.addEventListener("click",()=>t.start()),h.addEventListener("click",()=>t.stop()),c.addEventListener("click",()=>t.reset()),o.addEventListener("click",()=>{const e={width:t.width,height:t.height,cell_size:t.cell_size,field:t.field};window.location.search="?data="+r(n(e),s)})}(i)}}]);